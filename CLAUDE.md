# Пояснительная Бригада Бот

Телеграм-бот для объяснения мемов и шуток по фотографиям с использованием OpenAI GPT-4o.

## Описание

Бот анализирует изображения с помощью ИИ и объясняет юмор, мемы или культурные отсылки на них. Активируется по ключевым фразам или команде `/explain`. Поддерживает анализ изображений из текущего сообщения или ответа на другое сообщение.

## Триггеры

Бот реагирует на следующие фразы:
- "Можно пояснительную бригаду?"
- "МПБ"
- "пояснительную бригаду"
- "пояснительная бригада"
- "не понял"

## Команды

- `/start` - приветствие и описание возможностей бота
- `/explain` - явная команда для объяснения мема/шутки с изображения

## Функциональность

- Анализ изображений с мемами
- Объяснение юмора и культурных отсылок
- Контекстуальные пояснения шуток
- Поддержка русского языка
- Анализ сообщений-ответов (reply) для получения контекста
- Обработка изображений из ответов или прикрепленных к текущему сообщению

## Алгоритм работы

1. При получении триггерной фразы проверяет:
   - Есть ли изображение в текущем сообщении
   - Есть ли ответ (reply) на другое сообщение с изображением
2. Анализирует найденное изображение
3. Предоставляет объяснение мема/шутки

## Технические требования

- Python 3.8+
- Виртуальное окружение (venv)
- Обработка изображений через Telegram Bot API
- Интеграция с OpenAI GPT-4o Vision для анализа изображений
- Асинхронная обработка запросов

## Зависимости

- `python-telegram-bot==21.5` - библиотека для работы с Telegram Bot API
- `openai` - клиент для OpenAI API
- `python-dotenv` - загрузка переменных окружения
- `aiohttp` - асинхронные HTTP-запросы

## Конфигурация (.env файл)

```
BOT_TOKEN=ваш_токен_бота
OPENAI_API_KEY=ваш_api_ключ_openai
ASSISTANT_ID=id_ассистента_openai
TELEGRAM_API_ID=api_id_telegram
TELEGRAM_API_HASH=api_hash_telegram
TELEGRAM_PHONE=номер_телефона
CHAT_ID=id_чата
```

## Установка и запуск

1. Клонировать репозиторий
2. Создать виртуальное окружение: `python3 -m venv venv`
3. Активировать окружение: `source venv/bin/activate`
4. Установить зависимости: `pip install -r requirements.txt`
5. Настроить `.env` файл с токенами
6. Запустить бота: `python bot.py`

## Особенности

- Включает chat_id в ответы для отладки
- Подробное логирование всех операций
- Обработка ошибок и исключений
- Поддержка изображений в различных форматах